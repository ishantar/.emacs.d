--- ../smartparens.el	2018-11-05 13:27:23.573308743 -0500
+++ ../smartparens.el.patched	2018-11-05 13:25:55.088841916 -0500
@@ -704,6 +704,30 @@
   :group 'editing
   :prefix "sp-")
 
+(defvar sp-config-hook nil)
+
+(defcustom sp-config-options '(smartparens-config)
+  "Setting this variable directly outside of Customize will not take effect:
+    to configure this option from lisp code, set `sp-config-hook' to either
+    nil (no additional settings), or to a list of functions that each take
+    no arguments.  To use the default configuration, the first of these
+    functions should call `(require 'smartparens-config)'"
+
+  :type '(choice (const "no additional settings" nil)
+                 (set :tag "set configuration options:"
+                      (const :tag "use the default config for language-specific settings" 
+                             smartparens-config)
+                      (function :tag "set a personal configuration function")))
+  :group 'smartparens
+  :set (lambda (NAME VAL)  (let ((c (car VAL)))
+          (prog1 
+            (set-default NAME VAL)
+             (and c (if (functionp c)
+                           (setq sp-config-hook '(c))
+                      (setq sp-config-hook 
+                        (cons (lambda () (require 'smartparens-config))
+                               (and (cadr VAL) (list (cadr VAL))))) ))))))
+
 ;;;###autoload
 (define-minor-mode smartparens-mode
   "Toggle smartparens mode.
@@ -717,13 +741,14 @@
   :lighter (" SP" (:eval (if smartparens-strict-mode "/s" "")))
   :group 'smartparens
   :keymap smartparens-mode-map
+  (progn (run-hooks 'sp-config-hook)
   (if smartparens-mode
       (progn
         (sp--init)
         (add-hook 'self-insert-uses-region-functions 'sp-wrap--can-wrap-p nil 'local)
         (run-hooks 'smartparens-enabled-hook))
     (remove-hook 'self-insert-uses-region-functions 'sp-wrap--can-wrap-p 'local)
-    (run-hooks 'smartparens-disabled-hook)))
+            (run-hooks 'smartparens-disabled-hook))))
 
 (defvar smartparens-strict-mode-map
   (let ((map (make-sparse-keymap)))
@@ -757,6 +782,7 @@
 after the smartparens indicator in the mode list."
   :init-value nil
   :group 'smartparens
+  (progn (run-hooks 'sp-config-hook) 
   (if smartparens-strict-mode
       (progn
         (unless smartparens-mode
@@ -773,9 +799,11 @@
     (put 'sp-backward-delete-char 'delete-selection 'supersede)
     (put 'sp-delete-char 'delete-selection 'supersede)
     (remove-hook 'self-insert-uses-region-functions 'sp--self-insert-uses-region-strict-p 'local)
-    (let ((std-val (car (plist-get (symbol-plist 'sp-autoskip-closing-pair) 'standard-value)))
-          (saved-val (car (plist-get (symbol-plist 'sp-autoskip-closing-pair) 'saved-value))))
-      (setq sp-autoskip-closing-pair (eval (or saved-val std-val))))))
+             (let ((std-val 
+                      (car (plist-get (symbol-plist 'sp-autoskip-closing-pair) 'standard-value)))
+                   (saved-val 
+                      (car (plist-get (symbol-plist 'sp-autoskip-closing-pair) 'saved-value))))
+               (setq sp-autoskip-closing-pair (eval (or saved-val std-val)))))))
 
 ;;;###autoload
 (define-globalized-minor-mode smartparens-global-strict-mode
@@ -9343,13 +9371,14 @@
 support custom pairs."
   :init-value nil
   :group 'show-smartparens
+  (progn (run-hooks 'sp-config-hook)
   (if show-smartparens-mode
       (unless sp-show-pair-idle-timer
         (setq sp-show-pair-idle-timer
               (run-with-idle-timer sp-show-pair-delay t
                                    'sp-show--pair-function)))
     (when sp-show-pair-overlays
-      (sp-show--pair-delete-overlays))))
+              (sp-show--pair-delete-overlays)))))
 
 ;;;###autoload
 (define-globalized-minor-mode show-smartparens-global-mode
